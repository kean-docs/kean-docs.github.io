{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Caching is a great way to improve application performance and end-user experience. Developers often overlook "},{"type":"reference","isActive":true,"identifier":"https:\/\/tools.ietf.org\/html\/rfc7234"},{"type":"text","text":" natively "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/library\/mac\/documentation\/Cocoa\/Conceptual\/URLLoadingSystem\/URLLoadingSystem.html"},{"type":"text","text":" by "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" To enable HTTP caching the server sends special HTTP headers along with the request."}]},{"anchor":"HTTP-Caching","level":3,"type":"heading","text":"HTTP Caching"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here is an example of properly configured HTTP "},{"type":"codeVoice","code":"cache-control"},{"type":"text","text":" headers:"}]},{"type":"codeListing","syntax":null,"code":["HTTP\/1.1 200 OK","Cache-Control: public, max-age=3600","Expires: Mon, 26 Jan 2016 17:45:57 GMT","Last-Modified: Mon, 12 Jan 2016 17:45:57 GMT","ETag: \"686897696a7c876b7e\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This response is cacheable and will be "},{"type":"emphasis","inlineContent":[{"type":"text","text":"fresh"}]},{"type":"text","text":" for 1 hour. When it becomes "},{"type":"emphasis","inlineContent":[{"type":"text","text":"stale"}]},{"type":"text","text":", the client validates it by making a "},{"type":"emphasis","inlineContent":[{"type":"text","text":"conditional"}]},{"type":"text","text":" request using the "},{"type":"codeVoice","code":"If-Modified-Since"},{"type":"text","text":" and\/or "},{"type":"codeVoice","code":"If-None-Match"},{"type":"text","text":" headers. If the response is still fresh the server returns status code "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Status\/304"},{"type":"text","text":" to instruct the client to use cached data, or it would return "},{"type":"codeVoice","code":"200 OK"},{"type":"text","text":" with new data otherwise."}]},{"style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, "},{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" uses "},{"type":"codeVoice","code":"URLCache.shared"},{"type":"text","text":" with a small disk and memory capacity. You might not know it, but already be taking advantage of HTTP caching."}]}],"type":"aside","name":"Tip"},{"type":"paragraph","inlineContent":[{"type":"text","text":"HTTP caching is a flexible system where both the server and the client get a say over what gets cached and how. With HTTP, a server can set restrictions on which responses are cacheable, set an expiration age for responses, provide validators ("},{"type":"codeVoice","code":"ETag"},{"type":"text","text":", "},{"type":"codeVoice","code":"Last-Modified"},{"type":"text","text":") to check stale responses, force revalidation on each request, and more."}]},{"anchor":"Controlling-Caching","level":3,"type":"heading","text":"Controlling Caching"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"URLSession"},{"type":"text","text":" (and "},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":") support HTTP caching out of the box. There is a "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlsessiondatadelegate\/1411612-urlsession"},{"type":"text","text":" for a response to be cached. It is not just the server that has control. For example, you can use "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlrequest\/cachepolicy"},{"type":"text","text":" to modify caching behavior from the client."}]},{"type":"codeListing","syntax":"swift","code":["let response = try await client.send(API.user.get, delegate: delegate) {","    $0.cachePolicy = .reloadIgnoringLocalCacheData","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/get\/caching"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Get\/documentation\/Get\/caching","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Learn how the framework caches data."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Caching","role":"article","modules":[{"name":"Get"}]},"hierarchy":{"paths":[["doc:\/\/Get\/documentation\/Get"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/Get\/documentation\/Get\/define-api","doc:\/\/Get\/documentation\/Get\/authentication","doc:\/\/Get\/documentation\/Get\/integrations"],"generated":true}],"references":{"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/304":{"title":"304 Not Modified","titleInlineContent":[{"type":"codeVoice","code":"304 Not Modified"}],"type":"link","identifier":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Status\/304","url":"https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTTP\/Status\/304"},"doc://Get/documentation/Get/APIClient":{"role":"symbol","title":"APIClient","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIClient"}],"abstract":[{"type":"text","text":"Performs network requests constructed using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/Request"},{"type":"text","text":"."}],"identifier":"doc:\/\/Get\/documentation\/Get\/APIClient","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIClient"}],"url":"\/documentation\/get\/apiclient"},"doc://Get/documentation/Get/authentication":{"role":"article","title":"Authentication","abstract":[{"type":"text","text":"Learn how to implement authentication."}],"identifier":"doc:\/\/Get\/documentation\/Get\/authentication","kind":"article","type":"topic","url":"\/documentation\/get\/authentication"},"https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html":{"title":"supported","titleInlineContent":[{"type":"text","text":"supported"}],"type":"link","identifier":"https:\/\/developer.apple.com\/library\/mac\/documentation\/Cocoa\/Conceptual\/URLLoadingSystem\/URLLoadingSystem.html","url":"https:\/\/developer.apple.com\/library\/mac\/documentation\/Cocoa\/Conceptual\/URLLoadingSystem\/URLLoadingSystem.html"},"https://tools.ietf.org/html/rfc7234":{"title":"HTTP cache","titleInlineContent":[{"type":"text","text":"HTTP cache"}],"type":"link","identifier":"https:\/\/tools.ietf.org\/html\/rfc7234","url":"https:\/\/tools.ietf.org\/html\/rfc7234"},"https://developer.apple.com/documentation/foundation/nsurlrequest/cachepolicy":{"title":"URLRequest.CachePolicy","titleInlineContent":[{"type":"codeVoice","code":"URLRequest.CachePolicy"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlrequest\/cachepolicy","url":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlrequest\/cachepolicy"},"doc://Get/documentation/Get/define-api":{"role":"article","title":"Modeling APIs","abstract":[{"type":"text","text":"Learn how to define an API using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/Request"},{"type":"text","text":" type."}],"identifier":"doc:\/\/Get\/documentation\/Get\/define-api","kind":"article","type":"topic","url":"\/documentation\/get\/define-api"},"doc://Get/documentation/Get/Request":{"role":"symbol","title":"Request","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Request"}],"abstract":[{"type":"text","text":"An HTTP network request."}],"identifier":"doc:\/\/Get\/documentation\/Get\/Request","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Request"}],"url":"\/documentation\/get\/request"},"doc://Get/documentation/Get":{"role":"collection","title":"Get","abstract":[{"type":"text","text":"A lean Swift web API client built using async\/await."}],"identifier":"doc:\/\/Get\/documentation\/Get","kind":"symbol","type":"topic","url":"\/documentation\/get"},"https://developer.apple.com/documentation/foundation/nsurlsessiondatadelegate/1411612-urlsession":{"title":"set of requirements","titleInlineContent":[{"type":"text","text":"set of requirements"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlsessiondatadelegate\/1411612-urlsession","url":"https:\/\/developer.apple.com\/documentation\/foundation\/nsurlsessiondatadelegate\/1411612-urlsession"},"doc://Get/documentation/Get/integrations":{"role":"article","title":"Integrations","abstract":[{"type":"text","text":"Learn how to extend "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/APIClient"},{"type":"text","text":" using third-party frameworks."}],"identifier":"doc:\/\/Get\/documentation\/Get\/integrations","kind":"article","type":"topic","url":"\/documentation\/get\/integrations"}}}