{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For smaller apps, using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/APIClient"},{"type":"text","text":" directly without creating an API definition can be acceptable. But it is generally a good idea to define the available APIs somewhere to reduce the clutter in the rest of the code and eliminate duplication."}]},{"anchor":"Creating-Requests","level":2,"type":"heading","text":"Creating Requests"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The best way to create requests is by using its factory methods:"}]},{"type":"codeListing","syntax":"swift","code":["Request<User>.get(\"\/user\")","","Request<Void>.post(\"\/repos\", body: Repo(name: \"CreateAPI\"))","","Request<Repo>.patch(","    \"\/repos\/octokit\",","    query: [(\"password\", \"123456\")],","    body: Repo(access: .public),","    headers: [\"Version\": \"v2\"]",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"However, there are also initializers available that accept HTTP method as one of the parameters."}]},{"anchor":"Modeling-APIs-as-Operations","level":2,"type":"heading","text":"Modeling APIs as Operations"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For APIs that don’t follow REST API design, there are other simpler ways to define APIs. For example, you can simply list all of the available operations."}]},{"type":"codeListing","syntax":"swift","code":["public enum API {","    public static func getReposForUser(named name: String) -> Request<User> {","        .get(\"\/users\/\\(name)\/repos\")","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Usage:"}]},{"type":"codeListing","syntax":"swift","code":["let repos = try await client.send(API.getReposForUser(named: \"kean\")"]},{"anchor":"Modelling-REST-APIs","level":2,"type":"heading","text":"Modelling REST APIs"},{"type":"paragraph","inlineContent":[{"type":"text","text":"REST APIs are designed around resources. One of the ideas I had was to create a separate type to represent each of the resources and expose HTTP methods that are available on them. It works best for APIs that closely follow ("},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.microsoft.com\/en-us\/azure\/architecture\/best-practices\/api-design"},{"type":"text","text":"). GitHub API is a great example of a REST API, so that’s why I used it in the examples."}]},{"type":"codeListing","syntax":"swift","code":["public enum API {}","","extension API {","    public static func users(_ name: String) -> UsersResource {","        UsersResource(path: \"\/users\/\\(name)\")","    }","    ","    public struct UsersResource {","        \/\/\/ `\/users\/{username}`","        public let path: String","","        public var get: Request<User> { .get(path) }","    }","}","","extension API.UsersResource {","    public var repos: ReposResource { ReposResource(path: path + \"\/repos\") }","    ","    public struct ReposResource {","        public let path: String","","        public var get: Request<[Repo]> { .get(path) }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Usage:"}]},{"type":"codeListing","syntax":"swift","code":["let repos = try await client.send(API.users(\"kean\").repos.get)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This API is visually appealing, but it can be a bit tedious to write and less discoverable than simply listing all available calls."}]},{"type":"aside","style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"There are many "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Moya\/Moya\/blob\/master\/docs\/Examples\/Basic.md"},{"type":"text","text":" to model APIs using enums. This usually isn’t ideal because you are setting yourself for merge conflicts, and it is harder to read and modify than other approaches. When you add a new call, you should only need to make a change in one place."}]}]},{"type":"aside","style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/kean\/CreateAPI"},{"type":"text","text":", you can take your backend OpenAPI spec, and generate all of the response entities and even requests for Get ``APIClient`"}]}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/get\/define-api"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Get\/documentation\/Get\/define-api","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Learn how to define an API using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/Request"},{"type":"text","text":" type."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Modelling APIs","role":"article","modules":[{"name":"Get"}]},"hierarchy":{"paths":[["doc:\/\/Get\/documentation\/Get"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/Get\/documentation\/Get\/authentication","doc:\/\/Get\/documentation\/Get\/caching","doc:\/\/Get\/documentation\/Get\/integrations"],"generated":true}],"references":{"doc://Get/documentation/Get/APIClient":{"role":"symbol","title":"APIClient","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIClient"}],"abstract":[{"type":"text","text":"Performs network requests constructed using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/Request"},{"type":"text","text":"."}],"identifier":"doc:\/\/Get\/documentation\/Get\/APIClient","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIClient"}],"url":"\/documentation\/get\/apiclient"},"doc://Get/documentation/Get/caching":{"role":"article","title":"Caching","abstract":[{"type":"text","text":"Learn how Get caches data."}],"identifier":"doc:\/\/Get\/documentation\/Get\/caching","kind":"article","type":"topic","url":"\/documentation\/get\/caching"},"https://docs.microsoft.com/en-us/azure/architecture/best-practices/api-design":{"title":"REST API design","titleInlineContent":[{"type":"text","text":"REST API design"}],"type":"link","identifier":"https:\/\/docs.microsoft.com\/en-us\/azure\/architecture\/best-practices\/api-design","url":"https:\/\/docs.microsoft.com\/en-us\/azure\/architecture\/best-practices\/api-design"},"doc://Get/documentation/Get/Request":{"role":"symbol","title":"Request","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Request"}],"abstract":[{"type":"text","text":"An HTTP network request."}],"identifier":"doc:\/\/Get\/documentation\/Get\/Request","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Request"}],"url":"\/documentation\/get\/request"},"doc://Get/documentation/Get/authentication":{"role":"article","title":"Authentication","abstract":[{"type":"text","text":"Learn how to implement authentication using Get."}],"identifier":"doc:\/\/Get\/documentation\/Get\/authentication","kind":"article","type":"topic","url":"\/documentation\/get\/authentication"},"doc://Get/documentation/Get/integrations":{"role":"article","title":"Integrations","abstract":[{"type":"text","text":"Learn how to extend "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Get\/documentation\/Get\/APIClient"},{"type":"text","text":" using third-party frameworks."}],"identifier":"doc:\/\/Get\/documentation\/Get\/integrations","kind":"article","type":"topic","url":"\/documentation\/get\/integrations"},"doc://Get/documentation/Get":{"role":"collection","title":"Get","abstract":[{"type":"text","text":"A modern Swift web API client built using async\/await."}],"identifier":"doc:\/\/Get\/documentation\/Get","kind":"symbol","type":"topic","url":"\/documentation\/get"},"https://github.com/Moya/Moya/blob/master/docs/Examples/Basic.md":{"title":"suggestions","titleInlineContent":[{"type":"text","text":"suggestions"}],"type":"link","identifier":"https:\/\/github.com\/Moya\/Moya\/blob\/master\/docs\/Examples\/Basic.md","url":"https:\/\/github.com\/Moya\/Moya\/blob\/master\/docs\/Examples\/Basic.md"},"https://github.com/kean/CreateAPI":{"title":"CreateAPI","titleInlineContent":[{"type":"text","text":"CreateAPI"}],"type":"link","identifier":"https:\/\/github.com\/kean\/CreateAPI","url":"https:\/\/github.com\/kean\/CreateAPI"}}}