{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The pipeline performs cache lookup automatically when you request an image, but you also have a fair deal of control over the caching behavior with "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct"},{"type":"text","text":"."}]},{"anchor":"Fetching-From-Cache","level":3,"type":"heading","text":"Fetching From Cache"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to perform cache lookup without download the image from the network, use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad"},{"type":"text","text":" option."}]},{"type":"codeListing","syntax":"swift","code":["let request = ImageRequest(url: url, options: [.returnCacheDataDontLoad])","let response = try await pipeline.imageTask(with: request).response","let cacheType = response.cacheType \/\/ .memory, .disk, or nil"]},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This option only affects custom cache layers, but not "},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":", which is controlled by the "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system"},{"type":"text","text":"."}]}],"type":"aside","name":"Important"},{"anchor":"Reloading-Images","level":3,"type":"heading","text":"Reloading Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you need to reload an image, you can use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":" to remove the image from all cache layers (excluding "},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":" that reloads automatically based on HTTP cache-control headers) before downloading it."}]},{"type":"codeListing","syntax":"swift","code":["let request = ImageRequest(url: url)","pipeline.cache.removeCachedImage(for: request)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to keep the image in caches but reload it, you can instruct the pipeline to ignore the cached data."}]},{"type":"codeListing","syntax":"swift","code":["let request = ImageRequest(url: url, options: [ .reloadIgnoringCachedData])","let response = try await pipeline.imageTask(with: request).response"]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct"},{"type":"text","text":" provides even more granluar control if needed, e.g. "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads"},{"type":"text","text":" and other similar options."}]},{"anchor":"Direct-Access","level":2,"type":"heading","text":"Direct Access"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can access any caching layer directly, but the pipeline also offers a convenience API: "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":". By using it, you can update multiple cache layers at once, and you don’t need to worry about managing the cache keys. It works with custom caches ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching"},{"type":"text","text":") but not with "},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":", which is controlled by the "},{"overridingTitleInlineContent":[{"type":"text","text":"URL loading system"}],"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","overridingTitle":"URL loading system"},{"type":"text","text":"."}]},{"anchor":"Subscript","level":3,"type":"heading","text":"Subscript"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can access memory cache with a subscript."}]},{"type":"codeListing","syntax":"swift","code":["let image = pipeline.cache[URL(string: \"https:\/\/example.com\/image.jpeg\")!]","pipeline.cache[ImageRequest(url: url)] = nil"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer"},{"type":"text","text":" contains some metadata about the image, and in the case of animated images or other images that require non-trivial rendering also contains "},{"type":"codeVoice","code":"data"},{"type":"text","text":". It also allows you to distinguish between progressive previews in case "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache"},{"type":"text","text":" option is enabled."}]}],"type":"aside","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":" respect request cache control options."}]},{"type":"codeListing","syntax":"swift","code":["let url = URL(string: \"https:\/\/example.com\/image.jpeg\")!","pipeline.cache[url] = ImageContainer(image: image)","","\/\/ Returns `nil` because memory cache reads are disabled","let request = ImageRequest(url: url, options: [.disableMemoryCacheWrites])","let image = pipeline.cache[request]"]},{"anchor":"Accessing-Images","level":3,"type":"heading","text":"Accessing Images"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Apart from the subscript, "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":" also has methods for reading and writing images in either memory or disk cache or both."}]},{"type":"codeListing","syntax":"swift","code":["let cache = pipeline.cache","let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\")!)","","cache.cachedImage(for: request) \/\/ From any cache layer","cache.cachedImage(for: request, caches: [.memory]) \/\/ Only memory","cache.cachedImage(for: request, caches: [.disk]) \/\/ Only disk (decodes data)","","let data = cache.cachedData(for: request)","cache.containsData(for: request) \/\/ Fast contains check ","","\/\/ Stores image in the memory cache and stores an encoded","\/\/ image in the disk cache","cache.storeCachedImage(ImageContainer(image: image), for: request)","","cache.removeCachedImage(for: request)","cache.removeAll()"]},{"anchor":"Managing-Cache-Keys","level":3,"type":"heading","text":"Managing Cache Keys"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You don’t need to worry about cache keys when working with "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":", but it also gives you access to them in case you need it."}]},{"type":"codeListing","syntax":"swift","code":["let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\"))","pipeline.cache.makeImageCacheKey(for: request)","pipeline.cache.makeDataCacheKey(for: request)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is also a hook in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate"},{"type":"text","text":" that allows you to customize how the keys are generated:"}]},{"type":"codeListing","syntax":"swift","code":["func cacheKey(for request: ImageRequest, pipeline: ImagePipeline) -> String? {","    request.userInfo[\"imageId\"] as? String","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/nuke\/accessing-caches"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/accessing-caches","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Learn how to access cached images and data."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Access Cached Images","role":"article","modules":[{"name":"Nuke"}]},"hierarchy":{"paths":[["doc:\/\/com.github.kean.nuke\/documentation\/Nuke","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching"]]},"seeAlsoSections":[{"title":"Overview","identifiers":["doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers"],"generated":true}],"references":{"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Cache-swift.struct":{"role":"symbol","title":"ImagePipeline.Cache","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Cache"}],"abstract":[{"type":"text","text":"Provides a set of convenience APIs for managing the pipeline cache layers,"},{"type":"text","text":" "},{"type":"text","text":"including "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching"},{"type":"text","text":" (memory cache) and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching"},{"type":"text","text":" (disk cache)."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Cache"}],"url":"\/documentation\/nuke\/imagepipeline\/cache-swift.struct"},"doc://com.github.kean.nuke/documentation/Nuke/DataCaching":{"role":"symbol","title":"DataCaching","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataCaching"}],"abstract":[{"type":"text","text":"Data cache."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DataCaching"}],"url":"\/documentation\/nuke\/datacaching"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct":{"role":"symbol","title":"ImageRequest.Options","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Options"}],"abstract":[{"type":"text","text":"Image request options."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Options"}],"url":"\/documentation\/nuke\/imagerequest\/options-swift.struct"},"doc://com.github.kean.nuke/documentation/Nuke/cache-layers":{"role":"article","title":"Cache Layers","abstract":[{"type":"text","text":"Learn about memory and disk cache layers in Nuke."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers","kind":"article","type":"topic","url":"\/documentation\/nuke\/cache-layers"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/disableMemoryCacheReads":{"role":"symbol","title":"disableMemoryCacheReads","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"disableMemoryCacheReads"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImageRequest","preciseIdentifier":"s:4Nuke12ImageRequestV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Options","preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV"}],"abstract":[{"type":"text","text":"Disables memory cache reads (see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching"},{"type":"text","text":")."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/disablememorycachereads"},"https://developer.apple.com/documentation/foundation/url_loading_system":{"title":"URL loading system","titleInlineContent":[{"type":"text","text":"URL loading system"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","url":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipelineDelegate":{"role":"symbol","title":"ImagePipelineDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImagePipelineDelegate"}],"abstract":[{"type":"text","text":"A delegate that allows you to customize the pipeline dynamically on a per-request basis."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImagePipelineDelegate"}],"url":"\/documentation\/nuke\/imagepipelinedelegate"},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer/isPreview":{"role":"symbol","title":"isPreview","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isPreview"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Returns "},{"type":"codeVoice","code":"true"},{"type":"text","text":" if the image in the container is a preview of the image."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagecontainer\/ispreview"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/returnCacheDataDontLoad":{"role":"symbol","title":"returnCacheDataDontLoad","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"returnCacheDataDontLoad"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ImageRequest","preciseIdentifier":"s:4Nuke12ImageRequestV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Options","preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV"}],"abstract":[{"type":"text","text":"Use existing cache data and fail if no cached data is available."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/returncachedatadontload"},"doc://com.github.kean.nuke/documentation/Nuke":{"role":"collection","title":"Nuke","abstract":[{"type":"text","text":"A powerful image loading system for Apple platforms."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke","kind":"symbol","type":"topic","url":"\/documentation\/nuke"},"doc://com.github.kean.nuke/documentation/Nuke/ImageCaching":{"role":"symbol","title":"ImageCaching","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageCaching"}],"abstract":[{"type":"text","text":"In-memory image cache."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageCaching"}],"url":"\/documentation\/nuke\/imagecaching"},"doc://com.github.kean.nuke/documentation/Nuke/caching":{"role":"collectionGroup","title":"Caching","abstract":[{"type":"text","text":"Learn about cache layers in Nuke and how to configure them."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching","kind":"article","type":"topic","url":"\/documentation\/nuke\/caching"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/isStoringPreviewsInMemoryCache":{"role":"symbol","title":"isStoringPreviewsInMemoryCache","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isStoringPreviewsInMemoryCache"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"codeVoice","code":"true"},{"type":"text","text":" by default. If "},{"type":"codeVoice","code":"true"},{"type":"text","text":", the pipeline will store all of the"},{"type":"text","text":" "},{"type":"text","text":"progressively generated previews in the memory cache. All of the"},{"type":"text","text":" "},{"type":"text","text":"previews have "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview"},{"type":"text","text":" flag set to "},{"type":"codeVoice","code":"true"},{"type":"text","text":"."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache","kind":"symbol","type":"topic","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/isstoringpreviewsinmemorycache"},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer":{"role":"symbol","title":"ImageContainer","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageContainer"}],"abstract":[{"type":"text","text":"An image container with an image and associated metadata."}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ImageContainer"}],"url":"\/documentation\/nuke\/imagecontainer"}}}