{"hierarchy":{"paths":[["doc:\/\/com.github.kean.nuke\/documentation\/Nuke","doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching"]]},"kind":"article","abstract":[{"type":"text","text":"Learn how to access cached images and data."}],"variants":[{"paths":["\/documentation\/nuke\/accessing-caches"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"inlineContent":[{"text":"The pipeline performs cache lookup automatically when you request an image, but you also have a fair deal of control over the caching behavior with ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct"},{"type":"text","text":"."}],"type":"paragraph"},{"level":3,"type":"heading","text":"Fetching From Cache","anchor":"Fetching-From-Cache"},{"inlineContent":[{"type":"text","text":"If you want to perform cache lookup without download the image from the network, use "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad","type":"reference","isActive":true},{"type":"text","text":" option."}],"type":"paragraph"},{"type":"codeListing","code":["let request = ImageRequest(url: url, options: [.returnCacheDataDontLoad])","let response = try await pipeline.imageTask(with: request).response","let cacheType = response.cacheType \/\/ .memory, .disk, or nil"],"syntax":"swift"},{"style":"important","name":"Important","content":[{"inlineContent":[{"type":"text","text":"This option only affects custom cache layers, but not "},{"code":"URLCache","type":"codeVoice"},{"type":"text","text":", which is controlled by the "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","isActive":true},{"type":"text","text":"."}],"type":"paragraph"}],"type":"aside"},{"text":"Reloading Images","type":"heading","anchor":"Reloading-Images","level":3},{"inlineContent":[{"text":"If you need to reload an image, you can use ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true},{"type":"text","text":" to remove the image from all cache layers (excluding "},{"code":"URLCache","type":"codeVoice"},{"type":"text","text":" that reloads automatically based on HTTP cache-control headers) before downloading it."}],"type":"paragraph"},{"syntax":"swift","code":["let request = ImageRequest(url: url)","pipeline.cache.removeCachedImage(for: request)"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"If you want to keep the image in caches but reload it, you can instruct the pipeline to ignore the cached data.","type":"text"}]},{"type":"codeListing","code":["let request = ImageRequest(url: url, options: [ .reloadIgnoringCachedData])","let response = try await pipeline.imageTask(with: request).response"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","type":"reference"},{"text":" provides even more granular control if needed, e.g. ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads","isActive":true},{"text":" and other similar options.","type":"text"}]},{"level":2,"type":"heading","anchor":"Direct-Access","text":"Direct Access"},{"type":"paragraph","inlineContent":[{"text":"You can access any caching layer directly, but the pipeline also offers a convenience API: ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","isActive":true},{"type":"text","text":". By using it, you can update multiple cache layers at once, and you don’t need to worry about managing the cache keys. It works with custom caches ("},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching"},{"text":" and ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching"},{"type":"text","text":") but not with "},{"type":"codeVoice","code":"URLCache"},{"type":"text","text":", which is controlled by the "},{"overridingTitle":"URL loading system","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","type":"reference","isActive":true,"overridingTitleInlineContent":[{"text":"URL loading system","type":"text"}]},{"text":".","type":"text"}]},{"level":3,"anchor":"Subscript","type":"heading","text":"Subscript"},{"type":"paragraph","inlineContent":[{"text":"You can access the memory cache with a subscript.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let image = pipeline.cache[URL(string: \"https:\/\/example.com\/image.jpeg\")!]","pipeline.cache[ImageRequest(url: url)] = nil"]},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer","isActive":true},{"type":"text","text":" contains some metadata about the image, and in the case of animated images or other images that require non-trivial rendering, also contains "},{"type":"codeVoice","code":"data"},{"type":"text","text":". It also allows you to distinguish between progressive previews in case "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache","type":"reference","isActive":true},{"type":"text","text":" option is enabled."}]}],"style":"note","type":"aside"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All "},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","type":"reference","isActive":true},{"text":" respect request cache control options.","type":"text"}]},{"code":["let url = URL(string: \"https:\/\/example.com\/image.jpeg\")!","pipeline.cache[url] = ImageContainer(image: image)","","\/\/ Returns `nil` because memory cache reads are disabled","let request = ImageRequest(url: url, options: [.disableMemoryCacheWrites])","let image = pipeline.cache[request]"],"type":"codeListing","syntax":"swift"},{"level":3,"anchor":"Accessing-Images","type":"heading","text":"Accessing Images"},{"inlineContent":[{"text":"Apart from the subscript, ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":" also has methods for reading and writing images in either memory or disk cache or both."}],"type":"paragraph"},{"syntax":"swift","code":["let cache = pipeline.cache","let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\")!)","","cache.cachedImage(for: request) \/\/ From any cache layer","cache.cachedImage(for: request, caches: [.memory]) \/\/ Only memory","cache.cachedImage(for: request, caches: [.disk]) \/\/ Only disk (decodes data)","","let data = cache.cachedData(for: request)","cache.containsData(for: request) \/\/ Fast contains check ","","\/\/ Stores image in the memory cache and stores an encoded","\/\/ image in the disk cache","cache.storeCachedImage(ImageContainer(image: image), for: request)","","cache.removeCachedImage(for: request)","cache.removeAll()"],"type":"codeListing"},{"type":"heading","text":"Managing Cache Keys","level":3,"anchor":"Managing-Cache-Keys"},{"inlineContent":[{"type":"text","text":"You don’t need to worry about cache keys when working with "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct"},{"type":"text","text":", but it also gives you access to them in case you need it."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let request = ImageRequest(url: URL(string: \"https:\/\/example.com\/image.jpeg\"))","pipeline.cache.makeImageCacheKey(for: request)","pipeline.cache.makeDataCacheKey(for: request)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is also a hook in "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate"},{"type":"text","text":" that allows you to customize how the keys are generated:"}]},{"syntax":"swift","code":["func cacheKey(for request: ImageRequest, pipeline: ImagePipeline) -> String? {","    request.userInfo[\"imageId\"] as? String","}"],"type":"codeListing"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/accessing-caches"},"seeAlsoSections":[{"generated":true,"title":"Overview","identifiers":["doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers"]}],"metadata":{"title":"Access Cached Images","roleHeading":"Article","role":"article","modules":[{"name":"Nuke"}]},"references":{"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/disableMemoryCacheReads":{"fragments":[{"kind":"keyword","text":"static"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"disableMemoryCacheReads","kind":"identifier"},{"kind":"text","text":": "},{"text":"ImageRequest","preciseIdentifier":"s:4Nuke12ImageRequestV","kind":"typeIdentifier"},{"kind":"text","text":"."},{"text":"Options","kind":"typeIdentifier","preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV"}],"abstract":[{"text":"Disables memory cache reads (see ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","isActive":true,"type":"reference"},{"text":").","type":"text"}],"role":"symbol","kind":"symbol","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/disablememorycachereads","type":"topic","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/disableMemoryCacheReads","title":"disableMemoryCacheReads"},"doc://com.github.kean.nuke/documentation/Nuke/cache-layers":{"abstract":[{"type":"text","text":"Learn about memory and disk cache layers in Nuke."}],"role":"article","kind":"article","url":"\/documentation\/nuke\/cache-layers","type":"topic","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/cache-layers","title":"Cache Layers"},"doc://com.github.kean.nuke/documentation/Nuke/ImageCaching":{"navigatorTitle":[{"text":"ImageCaching","kind":"identifier"}],"kind":"symbol","abstract":[{"type":"text","text":"In-memory image cache."}],"fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ImageCaching"}],"type":"topic","title":"ImageCaching","role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","url":"\/documentation\/nuke\/imagecaching"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Configuration-swift.struct/isStoringPreviewsInMemoryCache":{"kind":"symbol","title":"isStoringPreviewsInMemoryCache","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Configuration-swift.struct\/isStoringPreviewsInMemoryCache","url":"\/documentation\/nuke\/imagepipeline\/configuration-swift.struct\/isstoringpreviewsinmemorycache","role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"isStoringPreviewsInMemoryCache"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"type":"topic","abstract":[{"type":"codeVoice","code":"true"},{"type":"text","text":" by default. If "},{"type":"codeVoice","code":"true"},{"type":"text","text":", the pipeline will store all of the"},{"text":" ","type":"text"},{"type":"text","text":"progressively generated previews in the memory cache. All of the"},{"type":"text","text":" "},{"type":"text","text":"previews have "},{"type":"reference","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview","isActive":true},{"type":"text","text":" flag set to "},{"type":"codeVoice","code":"true"},{"text":".","type":"text"}]},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipeline/Cache-swift.struct":{"navigatorTitle":[{"kind":"identifier","text":"Cache"}],"kind":"symbol","abstract":[{"text":"Provides a set of convenience APIs for managing the pipeline cache layers,","type":"text"},{"text":" ","type":"text"},{"text":"including ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageCaching","isActive":true,"type":"reference"},{"text":" (memory cache) and ","type":"text"},{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","type":"reference","isActive":true},{"type":"text","text":" (disk cache)."}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"Cache","kind":"identifier"}],"type":"topic","title":"ImagePipeline.Cache","role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipeline\/Cache-swift.struct","url":"\/documentation\/nuke\/imagepipeline\/cache-swift.struct"},"https://developer.apple.com/documentation/foundation/url_loading_system":{"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system","title":"URL loading system","titleInlineContent":[{"text":"URL loading system","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/foundation\/url_loading_system"},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct/returnCacheDataDontLoad":{"fragments":[{"text":"static","kind":"keyword"},{"kind":"text","text":" "},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"returnCacheDataDontLoad","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:4Nuke12ImageRequestV","text":"ImageRequest"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:4Nuke12ImageRequestV7OptionsV","text":"Options"}],"abstract":[{"text":"Use existing cache data and fail if no cached data is available.","type":"text"}],"role":"symbol","kind":"symbol","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct\/returncachedatadontload","type":"topic","title":"returnCacheDataDontLoad","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct\/returnCacheDataDontLoad"},"doc://com.github.kean.nuke/documentation/Nuke/DataCaching":{"navigatorTitle":[{"kind":"identifier","text":"DataCaching"}],"kind":"symbol","abstract":[{"text":"Data cache.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DataCaching"}],"type":"topic","title":"DataCaching","role":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/DataCaching","url":"\/documentation\/nuke\/datacaching"},"doc://com.github.kean.nuke/documentation/Nuke/caching":{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/caching","abstract":[{"type":"text","text":"Learn about cache layers in Nuke and how to configure them."}],"kind":"article","role":"collectionGroup","title":"Caching","type":"topic","url":"\/documentation\/nuke\/caching"},"doc://com.github.kean.nuke/documentation/Nuke":{"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke","url":"\/documentation\/nuke","kind":"symbol","role":"collection","type":"topic","title":"Nuke","abstract":[{"text":"A powerful image loading system for Apple platforms.","type":"text"}]},"doc://com.github.kean.nuke/documentation/Nuke/ImageRequest/Options-swift.struct":{"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"Options","kind":"identifier"}],"kind":"symbol","type":"topic","title":"ImageRequest.Options","url":"\/documentation\/nuke\/imagerequest\/options-swift.struct","navigatorTitle":[{"text":"Options","kind":"identifier"}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageRequest\/Options-swift.struct","abstract":[{"text":"Image request options.","type":"text"}],"role":"symbol"},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer":{"type":"topic","kind":"symbol","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer","url":"\/documentation\/nuke\/imagecontainer","role":"symbol","title":"ImageContainer","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageContainer"}],"abstract":[{"type":"text","text":"An image container with an image and associated metadata."}],"navigatorTitle":[{"kind":"identifier","text":"ImageContainer"}]},"doc://com.github.kean.nuke/documentation/Nuke/ImageContainer/isPreview":{"type":"topic","title":"isPreview","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"kind":"identifier","text":"isPreview"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImageContainer\/isPreview","kind":"symbol","abstract":[{"type":"text","text":"Returns "},{"code":"true","type":"codeVoice"},{"type":"text","text":" if the image in the container is a preview of the image."}],"role":"symbol","url":"\/documentation\/nuke\/imagecontainer\/ispreview"},"doc://com.github.kean.nuke/documentation/Nuke/ImagePipelineDelegate":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ImagePipelineDelegate","kind":"identifier"}],"abstract":[{"text":"A delegate that allows you to customize the pipeline dynamically on a per-request basis.","type":"text"}],"role":"symbol","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ImagePipelineDelegate"}],"url":"\/documentation\/nuke\/imagepipelinedelegate","type":"topic","title":"ImagePipelineDelegate","identifier":"doc:\/\/com.github.kean.nuke\/documentation\/Nuke\/ImagePipelineDelegate"}}}